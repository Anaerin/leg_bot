BEGIN TRANSACTION;
CREATE TABLE `Statistics` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `command` VARCHAR(32) NOT NULL, `name` VARCHAR(64), `plural` VARCHAR(64), `ChannelId` INTEGER);
CREATE TABLE `Sessions` (`sid` VARCHAR(255) PRIMARY KEY, `expires` DATETIME, `data` TEXT, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
CREATE TABLE `Replies` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `command` VARCHAR(32) NOT NULL, `reply` VARCHAR(255), `ChannelId` INTEGER);
CREATE TABLE `Modules` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(32), `active` TINYINT(1));
CREATE TABLE `LastSeens` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(64), `dateTimeSeen` DATETIME, `ChannelId` INTEGER REFERENCES `Channels` (`id`) ON DELETE SET NULL ON UPDATE CASCADE);
CREATE TABLE `Counts` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `game` VARCHAR(255), `value` INTEGER DEFAULT 0, `StatisticId` INTEGER);
CREATE TABLE `ChannelsModules` (`ChannelId` INTEGER NOT NULL, `ModuleId` INTEGER NOT NULL, PRIMARY KEY (`ChannelId`, `ModuleId`));
CREATE TABLE `Channels` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(25), `active` TINYINT(1));
CREATE TABLE `Barks` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `command` VARCHAR(32) NOT NULL, `message` VARCHAR(128), `modsOnly` TINYINT(1) DEFAULT 1, `interval` INTEGER DEFAULT 0, `ChannelId` INTEGER REFERENCES `Channels` (`id`) ON DELETE SET NULL ON UPDATE CASCADE);
CREATE TABLE `AntiSpamRules` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(32) UNIQUE, `regularExpression` TEXT, `count` INTEGER DEFAULT 0);
CREATE TABLE "Advices" (
	`id`	INTEGER PRIMARY KEY AUTOINCREMENT,
	`game`	VARCHAR(255),
	`author`	VARCHAR(25),
	`content`	VARCHAR(512),
	`ChannelId`	INTEGER,
	`score`	INTEGER DEFAULT 10
);
COMMIT;
